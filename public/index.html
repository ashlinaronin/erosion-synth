<html>
  <head>
    <title>raindrop</title>
    <style>
      body {
        margin: 0;
      }

      main {
        /* display: flex; */
        /* justify-content: space-between; */
        display: flex;
        justify-content: center;
      }

      #instrument {
        width: 400px;
        height: 400px;
      }

      #score-image {
        height: 400px;
      }

      aside {
        display: flex;
        margin: 16px;
      }

      aside > * {
        width: 50%;
      }
    </style>
  </head>
  <body>
    <main>
      <img
        id="score-image"
        src=""
        alt="procedurally-generated landscape score"
      />
    </main>

    <aside>
      <div id="instrument">&nbsp;</div>
      <div>
        <h1>prompt</h1>
        <button type="button" id="prompt-button">choose prompt</button>
        <h2 id="prompt-header"></h2>
        <p id="prompt-text">click button to select a prompt</p>
      </div>
    </aside>

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.68/Tone.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/startaudiocontext@1.2.1/StartAudioContext.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/nexusui@2.1.5/dist/NexusUI.min.js"
    ></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="module">
      import { showRandomPrompt, showImage } from "./scripts/prompts.js";
      document
        .getElementById("prompt-button")
        .addEventListener("click", showRandomPrompt);

      const socket = io();

      socket.on("score.change", ({ imageIndex }) => {
        console.log("received score.change, showing random prompt");
        showImage(imageIndex);
        showRandomPrompt();
      });

      await StartAudioContext(Tone.context);
    </script>
  </body>
</html>
